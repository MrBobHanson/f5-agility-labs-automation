{
	"info": {
		"_postman_id": "78972c5c-0005-43ae-97b7-3f271ef4dc8e",
		"name": "AS3Lab-Onboarding",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "OLD",
			"item": [
				{
					"name": "BIG-IP01: Standalone On-board networking - OLD",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
								"exec": [
									"var respData = JSON.parse(responseBody);",
									"",
									"tests[\"response has id: \" +respData.id] = respData.id;",
									"",
									"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{_bigip_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \r\n    \"label\": \"my BIG-IP declaration for declarative onboarding\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip01.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n        \r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ],\r\n            \"cmpHash\": \"dst-ip\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.10/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ],\r\n            \"cmpHash\": \"src-ip\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.10/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \r\n        \"dbvars\": {\r\n            \"class\": \"DbVariables\",\r\n            \"ui.advisory.enabled\": true,\r\n            \"ui.advisory.color\": \"green\",\r\n            \"ui.advisory.text\": \"/Common/hostname\"\r\n        }\r\n    }\r\n}"
						},
						"url": {
							"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
							"protocol": "https",
							"host": [
								"{{bigip_server}}"
							],
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding"
							]
						}
					},
					"response": []
				},
				{
					"name": "BIG-IP02: Standalone On-board networking - OLD",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
								"exec": [
									"var respData = JSON.parse(responseBody);",
									"",
									"tests[\"response has id: \" +respData.id] = respData.id;",
									"",
									"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"type": "text",
								"value": "{{_bigip_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \r\n    \"label\": \"my BIG-IP declaration for declarative onboarding\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip02.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n        \r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ],\r\n            \"cmpHash\": \"dst-ip\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.11/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ],\r\n            \"cmpHash\": \"src-ip\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.11/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \r\n        \"dbvars\": {\r\n            \"class\": \"DbVariables\",\r\n            \"ui.advisory.enabled\": true,\r\n            \"ui.advisory.color\": \"green\",\r\n            \"ui.advisory.text\": \"/Common/hostname\"\r\n        }\r\n    }\r\n}"
						},
						"url": {
							"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
							"protocol": "https",
							"host": [
								"{{bigip_server}}"
							],
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding"
							]
						}
					},
					"response": []
				},
				{
					"name": "BIG-IP01: HA On-board networking - OLD",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
								"exec": [
									"var respData = JSON.parse(responseBody);",
									"",
									"tests[\"response has id: \" +respData.id] = respData.id;",
									"",
									"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"type": "text",
								"value": "{{_bigip_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip01.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.15/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.10/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.15/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.10/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \r\n        \"configsync\": {\r\n            \"class\": \"ConfigSync\",\r\n            \"configsyncIp\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverAddress\": {\r\n            \"class\": \"FailoverUnicast\",\r\n            \"address\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverGroup\": {\r\n            \"class\": \"DeviceGroup\",\r\n            \"type\": \"sync-failover\",\r\n            \"members\": [\r\n                \"bigip01.as3lab.com\",\r\n                \"bigip02.as3lab.com\"\r\n            ],\r\n            \"owner\": \"/Common/failoverGroup/members/0\",\r\n            \"autoSync\": true,\r\n            \"saveOnAutoSync\": true,\r\n            \"networkFailover\": true,\r\n            \"fullLoadOnSync\": false,\r\n            \"asmSync\": false\r\n        },\r\n        \"trust\": {\r\n            \"class\": \"DeviceTrust\",\r\n            \"localUsername\": \"{{bigip_user}}\",\r\n            \"localPassword\": \"{{bigip_passwd}}\",\r\n            \"remoteHost\": \"/Common/failoverGroup/members/1\",\r\n            \"remoteUsername\": \"{{bigip_user}}\",\r\n            \"remotePassword\": \"{{bigip_passwd}}\"\r\n        }\r\n    }\r\n}"
						},
						"url": {
							"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
							"protocol": "https",
							"host": [
								"{{bigip_server}}"
							],
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding"
							]
						}
					},
					"response": []
				},
				{
					"name": "BIG-IP02: HA On-board networking - OLD",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
								"exec": [
									"var respData = JSON.parse(responseBody);",
									"",
									"tests[\"response has id: \" +respData.id] = respData.id;",
									"",
									"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"type": "text",
								"value": "{{_bigip_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip02.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.11/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.16/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.11/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.16/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"configsync\": {\r\n            \"class\": \"ConfigSync\",\r\n            \"configsyncIp\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverAddress\": {\r\n            \"class\": \"FailoverUnicast\",\r\n            \"address\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverGroup\": {\r\n            \"class\": \"DeviceGroup\",\r\n            \"type\": \"sync-failover\",\r\n            \"members\": [\r\n                \"bigip01.as3lab.com\",\r\n                \"bigip02.as3lab.com\"\r\n            ],\r\n            \"owner\": \"/Common/failoverGroup/members/0\",\r\n            \"autoSync\": false,\r\n            \"saveOnAutoSync\": false,\r\n            \"networkFailover\": true,\r\n            \"fullLoadOnSync\": false,\r\n            \"asmSync\": false\r\n        },\r\n        \"trust\": {\r\n            \"class\": \"DeviceTrust\",\r\n            \"localUsername\": \"{{bigip_user}}\",\r\n            \"localPassword\": \"{{bigip_passwd}}\",\r\n            \"remoteHost\": \"/Common/failoverGroup/members/0\",\r\n            \"remoteUsername\": \"{{bigip_user}}\",\r\n            \"remotePassword\": \"{{bigip_passwd}}\"\r\n        }\r\n    }\r\n}"
						},
						"url": {
							"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
							"protocol": "https",
							"host": [
								"{{bigip_server}}"
							],
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "BIG-IP: Authenticate",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"pm.globals.set(\"_bigip_token\", jsonData.token.name);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"{{bigip_user}}\",\r\n  \"password\": \"{{bigip_passwd}}\",\r\n  \"loginProviderName\": \"tmos\"\r\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/authn/login",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"authn",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP: Enable iAppsLX",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "6d965dd9-2536-4702-8234-fc658d33c92d",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"command\":\"run\", \n\t\"utilCmdArgs\": \"-c 'touch /var/config/rest/iapps/enable'\"\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/tm/util/bash",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"tm",
						"util",
						"bash"
					]
				}
			},
			"response": []
		},
		{
			"name": "Download the Declarative Onboarding Package to BIG-IP",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "6d965dd9-2536-4702-8234-fc658d33c92d",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"command\":\"run\", \n\t\"utilCmdArgs\": \"-c 'curl -L -s -o /var/config/rest/downloads/{{doFilename}} https://github.com/F5Networks/f5-declarative-onboarding/releases/download/{{doVersion}}/{{doFilename}}?raw=true'\"\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/tm/util/bash",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"tm",
						"util",
						"bash"
					]
				}
			},
			"response": []
		},
		{
			"name": "Install Declarative Onboarding Package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ed0ad245-3c71-444d-98c0-1dccbf94d664",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('do_installation_status_id',respData.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\"operation\": \"INSTALL\",\r\"packageFilePath\": \"/var/config/rest/downloads/{{doFilename}}\"\r}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/iapp/package-management-tasks",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"iapp",
						"package-management-tasks"
					]
				},
				"description": "Request installs the RPM on the BIG-IP. This will not be necessary once AS3 container support is added in subsequent versions.\n"
			},
			"response": []
		},
		{
			"name": "Check installation status of DO Package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "623a800d-c68b-4fe1-b8e8-e4d43021e720",
						"exec": [
							"tests[\"Status code is: \" + responseCode.code] = responseCode.code === 200;",
							"",
							"var    retryCounter = environment.retryCounter;",
							"var    retryInterval = environment.retryInterval;",
							"var    retryLimit = environment.retryLimit;",
							"",
							"var respData = JSON.parse(responseBody);",
							"",
							"function pausecomp(millis)",
							"{",
							"    var date = new Date();",
							"    var curDate = null;",
							"    do { curDate = new Date(); }",
							"    while(curDate-date < millis);",
							"}",
							"",
							"if ( respData.status != \"FINISHED\") {",
							"    tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"    if ( parseInt(retryCounter) < parseInt(retryLimit))",
							"    {",
							"        tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"        postman.setEnvironmentVariable(\"retryCounter\", parseInt(retryCounter) + 1);",
							"        pausecomp(retryInterval);",
							"        postman.setNextRequest(\"Check RPM install process status\");",
							"    } else",
							"    {",
							"        postman.setEnvironmentVariable(\"retryCounter\", 0);",
							"        console.log(\"Resetting, retry counter to 0\");",
							"        tests[\"Retries Expired\"] = true === false;",
							"}",
							"} else {",
							"    tests[\"Process Status is: \" + respData.status] = respData.status == \"FINISHED\"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/iapp/package-management-tasks/{{do_installation_status_id}}",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"iapp",
						"package-management-tasks",
						"{{do_installation_status_id}}"
					]
				},
				"description": "See if the RPM install procedure finished successfully."
			},
			"response": []
		},
		{
			"name": "Get status of Declarative Onboarding package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "623a800d-c68b-4fe1-b8e8-e4d43021e720",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding/info",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding",
						"info"
					]
				},
				"description": "See if the RPM install procedure finished successfully."
			},
			"response": []
		},
		{
			"name": "Download the AS3 Package to BIG-IP",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "6d965dd9-2536-4702-8234-fc658d33c92d",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"command\":\"run\", \n\t\"utilCmdArgs\": \"-c 'curl -L -s -o /var/config/rest/downloads/{{as3Filename}} https://github.com/F5Networks/f5-appsvcs-extension/releases/download/{{as3Version}}/{{as3Filename}}?raw=true'\"\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/tm/util/bash",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"tm",
						"util",
						"bash"
					]
				}
			},
			"response": []
		},
		{
			"name": "Install AS3 Package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ed0ad245-3c71-444d-98c0-1dccbf94d664",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('as3_installation_status_id',respData.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\"operation\": \"INSTALL\",\r\"packageFilePath\": \"/var/config/rest/downloads/{{as3Filename}}\"\r}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/iapp/package-management-tasks",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"iapp",
						"package-management-tasks"
					]
				},
				"description": "Request installs the RPM on the BIG-IP. This will not be necessary once AS3 container support is added in subsequent versions.\n"
			},
			"response": []
		},
		{
			"name": "Check installation status of AS3 Package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "623a800d-c68b-4fe1-b8e8-e4d43021e720",
						"exec": [
							"tests[\"Status code is: \" + responseCode.code] = responseCode.code === 200;",
							"",
							"var    retryCounter = environment.retryCounter;",
							"var    retryInterval = environment.retryInterval;",
							"var    retryLimit = environment.retryLimit;",
							"",
							"var respData = JSON.parse(responseBody);",
							"",
							"function pausecomp(millis)",
							"{",
							"    var date = new Date();",
							"    var curDate = null;",
							"    do { curDate = new Date(); }",
							"    while(curDate-date < millis);",
							"}",
							"",
							"if ( respData.status != \"FINISHED\") {",
							"    tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"    if ( parseInt(retryCounter) < parseInt(retryLimit))",
							"    {",
							"        tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"        postman.setEnvironmentVariable(\"retryCounter\", parseInt(retryCounter) + 1);",
							"        pausecomp(retryInterval);",
							"        postman.setNextRequest(\"Check RPM install process status\");",
							"    } else",
							"    {",
							"        postman.setEnvironmentVariable(\"retryCounter\", 0);",
							"        console.log(\"Resetting, retry counter to 0\");",
							"        tests[\"Retries Expired\"] = true === false;",
							"}",
							"} else {",
							"    tests[\"Process Status is: \" + respData.status] = respData.status == \"FINISHED\"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/iapp/package-management-tasks/{{as3_installation_status_id}}",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"iapp",
						"package-management-tasks",
						"{{as3_installation_status_id}}"
					]
				},
				"description": "See if the RPM install procedure finished successfully."
			},
			"response": []
		},
		{
			"name": "Get status of AS3 package",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "623a800d-c68b-4fe1-b8e8-e4d43021e720",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/appsvcs/info",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"appsvcs",
						"info"
					]
				},
				"description": "See if the RPM install procedure finished successfully."
			},
			"response": []
		},
		{
			"name": "BIG-IP01: Standalone On-board networking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip01.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.15/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.10/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.15/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.10/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \r\n        \r\n        \"dbvars\": {\r\n            \"class\": \"DbVariables\",\r\n            \"ui.advisory.enabled\": true,\r\n            \"ui.advisory.color\": \"green\",\r\n            \"ui.advisory.text\": \"/Common/hostname\"\r\n        }\r\n    }\r\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP02: Standalone On-board networking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"type": "text",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip02.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.16/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.11/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.16/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.11/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \r\n        \"dbvars\": {\r\n            \"class\": \"DbVariables\",\r\n            \"ui.advisory.enabled\": true,\r\n            \"ui.advisory.color\": \"green\",\r\n            \"ui.advisory.text\": \"/Common/hostname\"\r\n        }\r\n    }\r\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP01: HA On-board networking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"type": "text",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip01.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.15/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.10/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.15/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.10/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \r\n        \"configsync\": {\r\n            \"class\": \"ConfigSync\",\r\n            \"configsyncIp\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverAddress\": {\r\n            \"class\": \"FailoverUnicast\",\r\n            \"address\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverGroup\": {\r\n            \"class\": \"DeviceGroup\",\r\n            \"type\": \"sync-failover\",\r\n            \"members\": [\r\n                \"bigip01.as3lab.com\",\r\n                \"bigip02.as3lab.com\"\r\n            ],\r\n            \"owner\": \"/Common/failoverGroup/members/0\",\r\n            \"autoSync\": false,\r\n            \"saveOnAutoSync\": false,\r\n            \"networkFailover\": true,\r\n            \"fullLoadOnSync\": false,\r\n            \"asmSync\": false\r\n        },\r\n        \"trust\": {\r\n            \"class\": \"DeviceTrust\",\r\n            \"localUsername\": \"{{bigip_user}}\",\r\n            \"localPassword\": \"{{bigip_passwd}}\",\r\n            \"remoteHost\": \"/Common/failoverGroup/members/1\",\r\n            \"remoteUsername\": \"{{bigip_user}}\",\r\n            \"remotePassword\": \"{{bigip_passwd}}\"\r\n        }\r\n    }\r\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP02: HA On-board networking",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6fc297c-3963-4ed9-bf9a-e863c0145706",
						"exec": [
							"var respData = JSON.parse(responseBody);",
							"",
							"tests[\"response has id: \" +respData.id] = respData.id;",
							"",
							"postman.setEnvironmentVariable('do_onboard_status_id',respData.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"type": "text",
						"value": "{{_bigip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP into an HA Pair\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"bigip02.as3lab.com\",\r\n\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"minimum\"\r\n        },\r\n        \"internal\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4093,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"internal-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.16/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"internal-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.11/24\",\r\n            \"vlan\": \"internal\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.2\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.16/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"external-self\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.20.11/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-1\"\r\n        },\r\n        \r\n        \"configsync\": {\r\n            \"class\": \"ConfigSync\",\r\n            \"configsyncIp\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverAddress\": {\r\n            \"class\": \"FailoverUnicast\",\r\n            \"address\": \"/Common/internal-localself/address\"\r\n        },\r\n        \"failoverGroup\": {\r\n            \"class\": \"DeviceGroup\",\r\n            \"type\": \"sync-failover\",\r\n            \"members\": [\r\n                \"bigip01.as3lab.com\",\r\n                \"bigip02.as3lab.com\"\r\n            ],\r\n            \"owner\": \"/Common/failoverGroup/members/0\",\r\n            \"autoSync\": false,\r\n            \"saveOnAutoSync\": false,\r\n            \"networkFailover\": true,\r\n            \"fullLoadOnSync\": false,\r\n            \"asmSync\": false\r\n        },\r\n        \"trust\": {\r\n            \"class\": \"DeviceTrust\",\r\n            \"localUsername\": \"{{bigip_user}}\",\r\n            \"localPassword\": \"{{bigip_passwd}}\",\r\n            \"remoteHost\": \"/Common/failoverGroup/members/0\",\r\n            \"remoteUsername\": \"{{bigip_user}}\",\r\n            \"remotePassword\": \"{{bigip_passwd}}\"\r\n        }\r\n    }\r\n}"
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding"
					]
				}
			},
			"response": []
		},
		{
			"name": "Check installation status of DO On-boarding",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "623a800d-c68b-4fe1-b8e8-e4d43021e720",
						"exec": [
							"tests[\"Status code is: \" + responseCode.code] = responseCode.code === 200;",
							"",
							"var    retryCounter = environment.retryCounter;",
							"var    retryInterval = environment.retryInterval;",
							"var    retryLimit = environment.retryLimit;",
							"",
							"var respData = JSON.parse(responseBody);",
							"",
							"function pausecomp(millis)",
							"{",
							"    var date = new Date();",
							"    var curDate = null;",
							"    do { curDate = new Date(); }",
							"    while(curDate-date < millis);",
							"}",
							"",
							"if ( respData.status != \"FINISHED\") {",
							"    tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"    if ( parseInt(retryCounter) < parseInt(retryLimit))",
							"    {",
							"        tests[\"retry-counter value is: \" + retryCounter] = retryCounter;",
							"        postman.setEnvironmentVariable(\"retryCounter\", parseInt(retryCounter) + 1);",
							"        pausecomp(retryInterval);",
							"        postman.setNextRequest(\"Check RPM install process status\");",
							"    } else",
							"    {",
							"        postman.setEnvironmentVariable(\"retryCounter\", 0);",
							"        console.log(\"Resetting, retry counter to 0\");",
							"        tests[\"Retries Expired\"] = true === false;",
							"}",
							"} else {",
							"    tests[\"Process Status is: \" + respData.status] = respData.status == \"FINISHED\"",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}"
					}
				],
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/shared/declarative-onboarding/task/{{do_onboard_status_id}}",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"shared",
						"declarative-onboarding",
						"task",
						"{{do_onboard_status_id}}"
					]
				},
				"description": "See if the RPM install procedure finished successfully."
			},
			"response": []
		},
		{
			"name": "BIG-IP: Check Device-Group Info",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"type": "text",
						"value": "{{_f5_bip_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://{{host}}/mgmt/tm/cm/device-group",
					"protocol": "https",
					"host": [
						"{{host}}"
					],
					"path": [
						"mgmt",
						"tm",
						"cm",
						"device-group"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP: Device-Group Sync-failover-dg",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/tm/cm/device-group/failoverGroup",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"tm",
						"cm",
						"device-group",
						"failoverGroup"
					]
				}
			},
			"response": []
		},
		{
			"name": "BIG-IP: Device Status \"all\"",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "X-F5-Auth-Token",
						"value": "{{_bigip_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://{{bigip_server}}/mgmt/tm/cm/device",
					"protocol": "https",
					"host": [
						"{{bigip_server}}"
					],
					"path": [
						"mgmt",
						"tm",
						"cm",
						"device"
					]
				},
				"description": "Get device status for \"bigip1\" and look at failoverState to find out if active or standby"
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}